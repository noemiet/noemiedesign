/**
 * multiscroll.js 0.1.7 Beta (customized with mouse wheel improvement)
 * https://github.com/alvarotrigo/multiscroll.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(b,g,e,n,y){b.fn.multiscroll=function(c){function u(){var a=g.location.hash.replace("#","");if(a.length){var c=b(".ms-left").find('[data-anchor="'+a+'"]');"undefined"!==typeof lastScrolledDestiny&&a===lastScrolledDestiny||h(c)}}function v(){w=b(g).height();b(".ms-tableCell").each(function(){b(this).css({height:z(b(this).parent())})});A();b.isFunction(c.afterResize)&&c.afterResize.call(this)}function A(){c.css3?(p(b(".ms-left"),"translate3d(0px, -"+b(".ms-left").find(".ms-section.active").position().top+
"px, 0px)",!1),p(b(".ms-right"),"translate3d(0px, -"+b(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(b(".ms-left").css("top",-b(".ms-left").find(".ms-section.active").position().top),b(".ms-right").css("top",-b(".ms-right").find(".ms-section.active").position().top))}function h(a){var f=a.index(),d=b(".ms-right").find(".ms-section").eq(H-1-f),e=a.data("anchor"),g=b(".ms-left .ms-section.active").index()+1,k=I(a),h={left:a.position().top,right:d.position().top};d.addClass("active").siblings().removeClass("active");
a.addClass("active").siblings().removeClass("active");c.anchors.length&&(location.hash=e);B();m=!1;c.css3?(b.isFunction(c.onLeave)&&c.onLeave.call(this,g,f+1,k),a="translate3d(0px, -"+h.left+"px, 0px)",h="translate3d(0px, -"+h.right+"px, 0px)",p(b(".ms-left"),a,!0),p(b(".ms-right"),h,!0),setTimeout(function(){b.isFunction(c.afterLoad)&&c.afterLoad.call(this,e,f+1);m=!0},c.scrollingSpeed)):(b.isFunction(c.onLeave)&&c.onLeave.call(this,g,f+1,k),b(".ms-left").animate({top:-h.left},c.scrollingSpeed,c.easing).promise().done(function(){b.isFunction(c.afterLoad)&&
c.afterLoad.call(this,e,f+1);m=!0}),b(".ms-right").animate({top:-h.right},c.scrollingSpeed,c.easing));lastScrolledDestiny=e;J(e);K(e,f)}function C(){e.addEventListener?(e.addEventListener("mousewheel",l,!1),e.addEventListener("wheel",l,!1)):e.attachEvent("onmousewheel",l)}function l(a){var b=(new Date).getTime();a=g.event||a;var c=a.wheelDelta||-a.deltaY||-a.detail;a=n.max(-1,n.min(1,c));149<q.length&&q.shift();q.push(n.abs(c));c=b-D;D=b;200<c&&(q=[]);m&&(0>a?d.moveSectionDown():d.moveSectionUp());
return!1}function p(a,b,c){a.toggleClass("ms-easing",c);a.css({"-webkit-transform":b,"-moz-transform":b,"-ms-transform":b,transform:b})}function K(a,f){c.navigation&&(b("#multiscroll-nav").find(".active").removeClass("active"),a?b("#multiscroll-nav").find('a[href="#'+a+'"]').addClass("active"):b("#multiscroll-nav").find("li").eq(f).find("a").addClass("active"))}function J(a){c.menu&&(b(c.menu).find(".active").removeClass("active"),b(c.menu).find('[data-menuanchor="'+a+'"]').addClass("active"))}function I(a){var c=
b(".ms-left .ms-section.active").index();a=a.index();return c>a?"up":"down"}function B(){var a=b(".ms-left .ms-section.active"),f=a.data("anchor"),a=a.index(),a=String(a);c.anchors.length&&(a=f);a=a.replace("/","-").replace("#","");f=RegExp("\\b\\s?ms-viewing-[^\\s]+\\b","g");b("body")[0].className=b("body")[0].className.replace(f,"");b("body").addClass("ms-viewing-"+a)}function L(){var a=e.createElement("p"),b,c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",
MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(a,null);for(var d in c)a.style[d]!==y&&(a.style[d]="translate3d(1px,1px,1px)",b=g.getComputedStyle(a).getPropertyValue(c[d]));e.body.removeChild(a);return b!==y&&0<b.length&&"none"!==b}function z(a){var b=w;if(c.paddingTop||c.paddingBottom)a=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")),b=w-a;return b}function M(a){var f=a.originalEvent;x(f)&&(a.preventDefault(),b(".ms-left .ms-section.active"),m&&(r=E(f).y,
n.abs(t-r)>b(g).height()/100*c.touchSensitivity&&(t>r?d.moveSectionDown():r>t&&d.moveSectionUp())))}function x(a){return"undefined"===typeof a.pointerType||"mouse"!=a.pointerType}function N(a){a=a.originalEvent;x(a)&&(t=E(a).y)}function E(a){var b=[];b.y="undefined"!==typeof a.pageY&&(a.pageY||a.pageX)?a.pageY:a.touches[0].pageY;b.x="undefined"!==typeof a.pageX&&(a.pageY||a.pageX)?a.pageX:a.touches[0].pageX;F&&x(a)&&(b.y=a.touches[0].pageY,b.x=a.touches[0].pageX);return b}var d=b.fn.multiscroll;c=
b.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left",rightSelector:".ms-right",afterLoad:null,onLeave:null,afterRender:null,afterResize:null},c);var m=!0,q=[],F=
"ontouchstart"in g||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints;".ms-right"!==c.rightSelector&&b(c.rightSelector).addClass("ms-right");".ms-left"!==c.leftSelector&&b(c.leftSelector).addClass("ms-left");var H=b(".ms-left").find(".ms-section").length,k,w=b(g).height();C();F&&(MSPointer=g.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"},b(e).off("touchstart "+MSPointer.down).on("touchstart "+MSPointer.down,N),b(e).off("touchmove "+MSPointer.move).on("touchmove "+
MSPointer.move,M));c.css3&&(c.css3=L());b("html, body").css({overflow:"hidden",height:"100%"});".ms-section"!==c.sectionSelector&&b(c.sectionSelector).each(function(){b(this).addClass("ms-section")});c.navigation&&(b("body").append('<div id="multiscroll-nav"><ul></ul></div>'),k=b("#multiscroll-nav"),k.css("color",c.navigationColor),k.addClass(c.navigationPosition));b(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%","-ms-touch-action":"none"});b(".ms-right").css({right:"1px",
top:"0","-ms-touch-action":"none","touch-action":"none"});b(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"});b(".ms-left .ms-section, .ms-right .ms-section").each(function(){var a=b(this).index();(c.paddingTop||c.paddingBottom)&&b(this).css("padding",c.paddingTop+" 0 "+c.paddingBottom+" 0");"undefined"!==typeof c.sectionsColor[a]&&b(this).css("background-color",c.sectionsColor[a]);"undefined"!==typeof c.anchors[a]&&b(this).attr("data-anchor",c.anchors[a]);if(c.verticalCentered){var d=
b(this);d.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+z(d)+'px" />')}b(this).closest(".ms-left").length&&c.navigation&&(d="",c.anchors.length&&(d=c.anchors[a]),a=c.navigationTooltips[a],"undefined"===typeof a&&(a=""),c.navigation&&k.find("ul").append('<li data-tooltip="'+a+'"><a href="#'+d+'"><span></span></a></li>'))});b(".ms-right").html(b(".ms-right").find(".ms-section").get().reverse());b(".ms-left .ms-section, .ms-right .ms-section").each(function(){var a=b(this).index();
b(this).css({height:"100%"});!a&&c.navigation&&k.find("li").eq(a).find("a").addClass("active")}).promise().done(function(){b(".ms-left .ms-section.active").length||(b(".ms-right").find(".ms-section").last().addClass("active"),b(".ms-left").find(".ms-section").first().addClass("active"));c.navigation&&k.css("margin-top","-"+k.height()/2+"px");b.isFunction(c.afterRender)&&c.afterRender.call(this);A();B();b(g).on("load",function(){var a=g.location.hash.replace("#",""),c=b('.ms-left .ms-section[data-anchor="'+
a+'"]');a.length&&h(c)})});b(g).on("hashchange",u);b(e).keydown(function(a){clearTimeout(G);var f=b(e.activeElement);f.is("textarea")||f.is("input")||f.is("select")||!c.keyboardScrolling||(-1<b.inArray(a.which,[40,38,32,33,34])&&a.preventDefault(),G=setTimeout(function(){var c=a.shiftKey;switch(a.which){case 38:case 33:d.moveSectionUp();break;case 32:if(c){d.moveSectionUp();break}case 40:case 34:d.moveSectionDown();break;case 36:d.moveTo(1);break;case 35:d.moveTo(b(".ms-left .ms-section").length)}},
150))});var G;b(e).mousedown(function(a){if(1==a.button)return a.preventDefault(),!1});b(e).on("click","#multiscroll-nav a",function(a){a.preventDefault();a=b(this).parent().index();h(b(".ms-left .ms-section").eq(a))});b(e).on({mouseenter:function(){var a=b(this).data("tooltip");b('<div class="multiscroll-tooltip '+c.navigationPosition+'">'+a+"</div>").hide().appendTo(b(this)).fadeIn(200)},mouseleave:function(){b(this).find(".multiscroll-tooltip").fadeOut(200,function(){b(this).remove()})}},"#multiscroll-nav li");
c.normalScrollElements&&(b(e).on("mouseenter",c.normalScrollElements,function(){d.setMouseWheelScrolling(!1)}),b(e).on("mouseleave",c.normalScrollElements,function(){d.setMouseWheelScrolling(!0)}));b(g).on("resize",v);d.moveSectionUp=function(){var a=b(".ms-left .ms-section.active").prev(".ms-section");!a.length&&c.loopTop&&(a=b(".ms-left .ms-section").last());a.length&&h(a)};d.moveSectionDown=function(){var a=b(".ms-left .ms-section.active").next(".ms-section");!a.length&&c.loopBottom&&(a=b(".ms-left .ms-section").first());
a.length&&h(a)};d.moveTo=function(a){var c="",c=isNaN(a)?b('.ms-left [data-anchor="'+a+'"]'):b(".ms-left .ms-section").eq(a-1);h(c)};var D=(new Date).getTime();d.setKeyboardScrolling=function(a){c.keyboardScrolling=a};d.setMouseWheelScrolling=function(a){a?C():e.addEventListener?(e.removeEventListener("mousewheel",l,!1),e.removeEventListener("wheel",l,!1)):e.detachEvent("onmousewheel",l)};d.setScrollingSpeed=function(a){c.scrollingSpeed=a};var t=0,r=0;d.destroy=function(){d.setKeyboardScrolling(!1);
d.setMouseWheelScrolling(!1);b(g).off("hashchange",u).off("resize",v);b(e).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")};d.build=function(){d.setKeyboardScrolling(!0);d.setMouseWheelScrolling(!0);b(g).on("hashchange",u).on("resize",v);b(e).on("mouseenter","#multiscroll-nav li").on("mouseleave","#multiscroll-nav li").on("click","#multiscroll-nav a")}}})(jQuery,window,document,Math);